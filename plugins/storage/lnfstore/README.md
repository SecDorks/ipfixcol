##<a name="top"></a>Lnfstore storage plugin

### Plugin description
The lnfstore plugin converts and store IPFIX data into NfDump files. Only a subset of IPFIX elements that have NetFlow equivalents can be stored into NfDump files. Other elements are skipped.

### Configuration

Default plugin configuration in **internalcfg.xml**

```xml
<storagePlugin>
	<fileFormat>lnfstore</fileFormat>
	<file>/usr/share/ipfixcol/plugins/ipfixcol-lnfstore-output.so</file>
	<threadName>lnfstore</threadName>
</storagePlugin>
```
Or as `ipfixconf` output:

```
     Plugin type         Name/Format     Process/Thread         File        
 ----------------------------------------------------------------------------
       storage             lnfstore         lnfstore          /usr/share/ipfixcol/plugins/ipfixcol-lnfstore-output.so
```

Here is an example of configuration in **startup.xml**:

```xml
<destination>
	<name>Storage</name>
	<fileWriter>
		<fileFormat>lnfstore</fileFormat>
		<profiles>no</profiles>
		<storagePath>/storage/data/path/</storagePath>
		<prefix>nfcapd.</prefix>
		<suffixMask>%Y%m%d%H%M%S</suffixMask>
		<identificatorField>ipfixcol</identificatorField>
		<compress>yes</compress>
		<dumpInterval>
			<timeWindow>300</timeWindow>
			<align>yes</align>
		</dumpInterval>
	</fileWriter>
</destination>
<!--## Only one plugin for all ODIDs -->
<singleManager>yes</singleManager>
```

We strongly recommend to use this plugin with activated Single Manager mode 
i.e. only one instance of the plugin is shared between all ODIDs. See the 
example configuration.

Files will be stored based on a configuration using the following template:  
*\<storagePath\>/YYYY/MM/DD/\<prefix\>\<suffixMask\>*  
where "YYYY/MM/DD" means year/month/day.


* **profiles** - When it is enabled ("yes"), the parameter \<storagePath\> is
ignored and flows will be stored into directories of profiles generated by
profiler intermediate plugin.

* **storagePath** - The path element specifies the storage directory for data
collected by the lnfstore plugin.

* **prefix** - Specifies name prefix of output files.

* **suffixMask** - Specifies name suffix of output files. Mask can contain
format specifier for day, month, etc. This allows you to create names based
on format specifiers. See *strftime* for conversion specification.

* **identificatorField** - Specifies name identification line for nfdump files.

* **compress** - Enable/disable LZO compression for files (yes/no)

* **dumpInterval**
	* **timeWindow** - Specifies the time interval in seconds to rotate files.
	* **align** - Align file rotation with next N minute interval.

[Back to Top](#top)
